{"version":3,"sources":["../src/schema.ts"],"names":[],"mappings":";;;;AAGA,IAAM,WAAA,GAAc;AAAA,EAClB,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,EAChB,IAAA,EAAM,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,EAC3B,SAAA,EAAW,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,EAChC,QAAA,EAAU,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,EAC/B,YAAA,EAAc,EAAE,MAAA,EAAO;AAAA;AAAA,EACvB,cAAA,EAAgB,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,EACrC,gBAAA,EAAkB,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,EACvC,IAAA,EAAM,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA;AAAA,EAC3B,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,EACpB,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,EACpB,YAAA,EAAc,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,EACnC,iBAAA,EAAmB,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ;AAC1C,CAAA;AAKA,IAAM,UAAA,GAAa,aAAA,CAAc,WAAA,CAAY,WAAW,CAAC;AAOzD,SAAS,YAAY,gBAAA,EAAuC;AAC1D,EAAA,OAAO,cAAc,WAAA,CAAY;AAAA,IAC/B,GAAG,WAAA;AAAA,IACH,GAAG;AAAA,GACJ,CAAC,CAAA;AACJ;AAEA,SAAS,cAAc,KAAA,EAAwB;AAC7C,EAAA,OAAO,MAAM,KAAA,CAAM,UAAA,EAAY,CAAC,OAAO,CAAC,CAAA,CACrC,KAAA,CAAM,mBAAA,EAAqB,CAAC,cAAc,CAAC,CAAA,CAC3C,MAAM,iBAAA,EAAmB,CAAC,gBAAgB,CAAC,CAAA;AAChD","file":"schema.js","sourcesContent":["import { v } from \"convex/values\";\nimport { defineTable, TableDefinition } from \"convex/server\";\n\nconst usersFields = {\n  email: v.string(),\n  name: v.optional(v.string()),\n  firstName: v.optional(v.string()),\n  lastName: v.optional(v.string()),\n  workosUserId: v.string(), // The WorkOS user ID (from identity.subject)\n  organizationId: v.optional(v.string()),\n  organizationName: v.optional(v.string()),\n  role: v.optional(v.string()), // Organization role (e.g., \"admin\", \"member\")\n  createdAt: v.number(),\n  updatedAt: v.number(),\n  lastSignInAt: v.optional(v.number()),\n  profilePictureUrl: v.optional(v.string()),\n};\n\n/**\n * A reusable users table definition that host apps can include into their schema\n */\nconst usersTable = applyIndicies(defineTable(usersFields));\n\n/**\n * Extend the users table with additional fields\n * @param additionalFields - The additional fields to add to the users table\n * @returns The extended users table\n */\nfunction extendUsers(additionalFields: Record<string, any>) {\n  return applyIndicies(defineTable({\n    ...usersFields,\n    ...additionalFields,\n  }));\n}\n\nfunction applyIndicies(table: TableDefinition) {\n  return table.index(\"by_email\", [\"email\"])\n    .index(\"by_workos_user_id\", [\"workosUserId\"])\n    .index(\"by_organization\", [\"organizationId\"]);\n}\n\nexport { usersTable, extendUsers };\n"]}