{"version":3,"sources":["../src/schema.ts"],"names":[],"mappings":";;;AASA,SAAS,WAAA,CAAY,GAAwB,gBAAA,EAAuC;AACnF,EAAA,MAAM,kBAAA,GAAqB;AAAA,IAC1B,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,IAChB,SAAA,EAAW,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,IAChC,QAAA,EAAU,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,IAC/B,YAAA,EAAc,EAAE,MAAA,EAAO;AAAA;AAAA,IACvB,YAAA,EAAc,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,IACnC,KAAA,EAAO,EAAE,QAAA,CAAS,CAAA,CAAE,MAAM,CAAA,CAAE,MAAA,EAAQ,CAAC,CAAA;AAAA;AAAA,IACrC,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,IACpB,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,IACpB,YAAA,EAAc,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ,CAAA;AAAA,IACnC,iBAAA,EAAmB,CAAA,CAAE,QAAA,CAAS,CAAA,CAAE,QAAQ;AAAA,GACzC;AAEA,EAAA,OAAO,aAAA;AAAA,IACN,WAAA,CAAY;AAAA,MACX,GAAG,kBAAA;AAAA,MACH,GAAG;AAAA,KACH;AAAA,GACF;AACD;AAOA,SAAS,aAAa,CAAA,EAAwB;AAC7C,EAAA,OAAO,WAAA,CAAY,CAAA,EAAG,EAAE,CAAA;AACzB;AAEA,SAAS,cAAc,KAAA,EAAY;AAClC,EAAA,OAAO,KAAA,CAAM,KAAA,CAAM,UAAA,EAAY,CAAC,OAAO,CAAC,CAAA,CAAE,KAAA,CAAM,mBAAA,EAAqB,CAAC,cAAc,CAAC,CAAA;AACtF","file":"schema.js","sourcesContent":["import { v as ConvexValues } from 'convex/values';\nimport { defineTable } from 'convex/server';\n\n/**\n * Extend the users table with additional fields\n * @param v - The Convex values object\n * @param additionalFields - The additional fields to add to the users table\n * @returns The extended users table\n */\nfunction extendUsers(v: typeof ConvexValues, additionalFields: Record<string, any>) {\n\tconst defaultUsersFields = {\n\t\temail: v.string(),\n\t\tfirstName: v.optional(v.string()),\n\t\tlastName: v.optional(v.string()),\n\t\tworkosUserId: v.string(), // The WorkOS user ID (from identity.subject)\n\t\torganization: v.optional(v.string()),\n\t\troles: v.optional(v.array(v.string())), // Application roles (e.g., [\"admin\", \"bookings\"])\n\t\tcreatedAt: v.number(),\n\t\tupdatedAt: v.number(),\n\t\tlastSignInAt: v.optional(v.number()),\n\t\tprofilePictureUrl: v.optional(v.string())\n\t};\n\n\treturn applyIndicies(\n\t\tdefineTable({\n\t\t\t...defaultUsersFields,\n\t\t\t...additionalFields\n\t\t})\n\t);\n}\n\n/**\n * A reusable users table definition that host apps can include in their schema\n * @param v - The Convex values object\n * @returns The users table\n */\nfunction defaultUsers(v: typeof ConvexValues) {\n\treturn extendUsers(v, {});\n}\n\nfunction applyIndicies(table: any) {\n\treturn table.index('by_email', ['email']).index('by_workos_user_id', ['workosUserId']);\n}\n\nexport { defaultUsers, extendUsers };\n"]}