{"version":3,"sources":["../src/cli/args.ts","../src/cli/paths.ts","../src/cli/log.ts","../src/cli/prompts.ts","../src/cli/copy.ts","../src/cli.ts"],"names":["path","pc","err","fs"],"mappings":"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","file":"cli.js","sourcesContent":["export type CliOptions = {\n  dest: string;\n  force: boolean;\n  yes: boolean;\n  dryRun: boolean;\n  backup: boolean;\n  verbose: boolean;\n  help: boolean;\n  version: boolean;\n};\n\nexport function parseArgs(argv: string[]): CliOptions {\n  const opts: CliOptions = {\n    dest: process.cwd(),\n    force: false,\n    yes: false,\n    dryRun: false,\n    backup: false,\n    verbose: false,\n    help: false,\n    version: false,\n  };\n\n  // Ignore optional positional subcommand 'copy'\n  const normalized = argv.filter((a) => a !== 'copy');\n  const it = normalized[Symbol.iterator]();\n  for (let cur = it.next(); !cur.done; cur = it.next()) {\n    const arg = cur.value as string;\n    if (arg === '--dest') {\n      const next = it.next();\n      if (!next.done && typeof next.value === 'string') {\n        opts.dest = next.value;\n      }\n      continue;\n    }\n    if (arg.startsWith('--dest=')) {\n      opts.dest = arg.slice('--dest='.length);\n      continue;\n    }\n    if (arg === '--force') { opts.force = true; continue; }\n    if (arg === '--yes' || arg === '-y') { opts.yes = true; continue; }\n    if (arg === '--dry-run') { opts.dryRun = true; continue; }\n    if (arg === '--backup') { opts.backup = true; continue; }\n    if (arg === '--verbose' || arg === '-v') { opts.verbose = true; continue; }\n    if (arg === '--help' || arg === '-h') { opts.help = true; continue; }\n    if (arg === '--version' || arg === '-V') { opts.version = true; continue; }\n  }\n\n  return opts;\n}\n\nexport function formatHelp(): string {\n  return [\n    'workos-convex-sveltekit [copy] [options]',\n    '',\n    'Options:',\n    '  --dest <path>     Destination directory (default: current working directory)',\n    '  --force           Overwrite without prompting',\n    '  --yes, -y         Assume yes to all prompts (non-interactive)',\n    '  --dry-run         Print planned actions without writing files',\n    '  --backup          Backup existing files before overwrite',\n    '  --verbose, -v     Verbose logging',\n    '  --help, -h        Show this help message',\n    '  --version, -V     Show version',\n  ].join('\\n');\n}\n\n\n","import { fileURLToPath } from 'node:url';\nimport path from 'node:path';\nimport * as fs from 'node:fs';\n\nexport function resolvePaths(destRoot: string) {\n  // dist/cli.js sits in dist/; templates/ is at ../templates relative to dist/cli.js\n  const templateRoot = fileURLToPath(new URL('../templates/', import.meta.url));\n  const resolved = { templateRoot: path.resolve(templateRoot), destRoot: path.resolve(destRoot) };\n  if (!fs.existsSync(resolved.templateRoot)) {\n    throw new Error(`Templates directory not found at: ${resolved.templateRoot}`);\n  }\n  return resolved;\n}\n\n\n","import pc from 'picocolors';\n\nexport function logInfo(msg: unknown) { console.log(pc.cyan(String(msg))); }\nexport function logWarn(msg: unknown) { console.warn(pc.yellow(String(msg))); }\nexport function logSuccess(msg: unknown) { console.log(pc.green(String(msg))); }\nexport function logError(err: unknown) { console.error(pc.red(String(err))); }\n\n\n","import readline from 'node:readline';\nimport fs from 'node:fs/promises';\nimport pc from 'picocolors';\nimport { createTwoFilesPatch } from 'diff';\n\ntype Choice = 'overwrite'|'skip'|'overwriteAll'|'skipAll'|'backup';\n\nexport async function promptConflict(relPath: string, srcPath: string, destPath: string): Promise<Choice> {\n  // Show a unified diff before prompting\n  try {\n    const oldText = await fs.readFile(destPath, 'utf8').catch(() => {\n      console.error(`Failed to read existing file ${destPath}:`, err);\n      return '';\n    });\n    const newText = await fs.readFile(srcPath, 'utf8').catch((err) => {\n      console.error(`Failed to read template file ${srcPath}:`, err);\n      return '';\n    });\n    // Normalize line endings to avoid noisy diffs from CRLF vs LF-only differences\n    const oldNorm = oldText.replace(/\\r\\n/g, '\\n');\n    const newNorm = newText.replace(/\\r\\n/g, '\\n');\n    const patch = createTwoFilesPatch(\n      relPath + ' (existing)',\n      relPath + ' (template)',\n      oldNorm,\n      newNorm,\n      'existing',\n      'template'\n    );\n\n    console.log(pc.bold(`Diff for ${relPath}`));\n    const lines = patch.split('\\n');\n    for (const line of lines) {\n      if (line.startsWith('+') && !line.startsWith('+++')) {\n        console.log(pc.green(line));\n      } else if (line.startsWith('-') && !line.startsWith('---')) {\n        console.log(pc.red(line));\n      } else if (line.startsWith('@@')) {\n        console.log(pc.cyan(line));\n      } else if (\n        line.startsWith('diff') ||\n        line.startsWith('index') ||\n        line.startsWith('Index') ||\n        line.startsWith('---') ||\n        line.startsWith('+++') ||\n        line.startsWith('===')\n      ) {\n        console.log(pc.dim(line));\n      } else {\n        console.log(line);\n      }\n    }\n  } catch (err) {\n    // If diff fails, continue without blocking prompts\n    console.error(`Failed to generate unified diff for ${relPath}:`, err);\n  }\n\n  // Allow stdout to flush diff output before showing the prompt\n  await new Promise((resolve) => setTimeout(resolve, 0));\n\n  const question = `Conflict: ${relPath}\\nChoose: [o]verwrite, [s]kip, [b]ackup, overwrite [a]ll, skip [A]ll: `;\n  const rl = readline.createInterface({ input: process.stdin, output: process.stdout });\n  try {\n    const answer: string = await new Promise((resolve) => rl.question(question, resolve));\n    const raw = (answer || '').trim();\n    const a = raw.toLowerCase();\n    // Accept explicit uppercase 'A' shortcut for Skip All, as shown in the prompt\n    if (raw === 'A' || a === 'all' || a === 'skip all' || a === 'skipall') return 'skipAll';\n    if (a === 'o' || a === 'overwrite') return 'overwrite';\n    if (a === 's' || a === 'skip') return 'skip';\n    if (a === 'b' || a === 'backup') return 'backup';\n    if (a === 'a' || a === 'overwrite all' || a === 'overwriteall') return 'overwriteAll';\n    // default to skip on unknown\n    return 'skip';\n  } finally {\n    rl.close();\n  }\n}\n","import type { CliOptions } from './args';\nimport fg from 'fast-glob';\nimport * as fs from 'fs-extra';\nimport path from 'node:path';\nimport { logInfo, logWarn, logSuccess, logError } from './log';\nimport { promptConflict } from './prompts';\n\ntype PlanItem = { kind: 'create'|'overwrite'|'skip'; src: string; dest: string; rel: string };\n\nexport async function copyTemplates({ opts, paths }: { opts: CliOptions; paths: { templateRoot: string; destRoot: string } }) {\n  // 1) Discover files under templates\n  const patterns = ['**/*'];\n  const ignore = ['**/node_modules/**', '**/.git/**', '**/dist/**'];\n  const relFiles = await fg(patterns, { cwd: paths.templateRoot, dot: true, onlyFiles: true, ignore });\n\n  // 2) Build plan\n  const plan: PlanItem[] = [];\n  for (const rel of relFiles) {\n    const src = path.join(paths.templateRoot, rel);\n    const dest = path.join(paths.destRoot, rel);\n    const exists = await fs.pathExists(dest);\n    if (!exists) {\n      plan.push({ kind: 'create', src, dest, rel });\n      continue;\n    }\n    // If destination exists, auto-skip when contents are identical\n    try {\n      const [srcBuf, destBuf] = await Promise.all([\n        fs.readFile(src),\n        fs.readFile(dest)\n      ]);\n      if (srcBuf.equals(destBuf)) {\n        plan.push({ kind: 'skip', src, dest, rel });\n      } else {\n        plan.push({ kind: 'overwrite', src, dest, rel });\n      }\n    } catch {\n      // On read error, fall back to prompting path\n      plan.push({ kind: 'overwrite', src, dest, rel });\n    }\n  }\n\n  // 3) Non-interactive conflict handling (no writes yet)\n  if (!process.stdout.isTTY && !opts.force && !opts.yes) {\n    const hasConflicts = plan.some(p => p.kind === 'overwrite');\n    if (hasConflicts) {\n      logWarn('Conflicts detected and no TTY. Re-run with --force or --yes.');\n      return { ok: false, plan } as const;\n    }\n  }\n\n  // 4) Dry-run output\n  const creates = plan.filter(p => p.kind === 'create').length;\n  const overwrites = plan.filter(p => p.kind === 'overwrite').length;\n  const skips = plan.filter(p => p.kind === 'skip').length;\n  if (opts.dryRun) {\n    if (opts.verbose) {\n      for (const p of plan) {\n        const label = p.kind === 'create' ? 'CREATE' : p.kind === 'overwrite' ? 'OVERWRITE' : 'SKIP';\n        logInfo(`${label}  ${p.rel}`);\n      }\n    }\n    logInfo(`Plan: ${creates} create, ${overwrites} overwrite, ${skips} skip`);\n    return { ok: true, plan } as const;\n  }\n\n  // 5) Execute plan (writes)\n  let created = 0;\n  let overwritten = 0;\n  let backedUp = 0;\n  let skipped = 0;\n  let hadError = false;\n\n  let global: 'overwriteAll'|'skipAll'|null = null;\n\n  for (const step of plan) {\n    try {\n      // Ensure directory\n      await fs.ensureDir(path.dirname(step.dest));\n\n      // auto-skip identical files identified during planning\n      if (step.kind === 'skip') {\n        if (opts.verbose) logInfo(`SKIP    ${step.rel}`);\n        skipped++;\n        continue;\n      }\n\n      if (step.kind === 'create') {\n        if (opts.verbose) logInfo(`CREATE  ${step.rel}`);\n        await fs.copy(step.src, step.dest, { overwrite: false, errorOnExist: false });\n        created++;\n        continue;\n      }\n\n      // overwrite conflict\n      let decision: 'overwrite'|'skip'|'backup' = 'overwrite';\n\n      if (opts.backup) {\n        decision = 'backup';\n      } else if (opts.force || opts.yes) {\n        decision = 'overwrite';\n      } else if (global === 'overwriteAll') {\n        decision = 'overwrite';\n      } else if (global === 'skipAll') {\n        decision = 'skip';\n      } else if (process.stdout.isTTY) {\n        const choice = await promptConflict(step.rel, step.src, step.dest);\n        if (choice === 'overwriteAll') { global = 'overwriteAll'; decision = 'overwrite'; }\n        else if (choice === 'skipAll') { global = 'skipAll'; decision = 'skip'; }\n        else if (choice === 'overwrite') { decision = 'overwrite'; }\n        else if (choice === 'backup') { decision = 'backup'; }\n        else { decision = 'skip'; }\n      } else {\n        // Non-interactive conflict\n        logWarn(`Conflict: ${step.rel}. Use --force or --yes to overwrite.`);\n        return { ok: false, plan } as const;\n      }\n\n      if (decision === 'skip') {\n        if (opts.verbose) logInfo(`SKIP    ${step.rel}`);\n        skipped++;\n        continue;\n      }\n\n      if (decision === 'backup') {\n        const backupPath = `${step.dest}.bak.${Date.now()}`;\n        await fs.move(step.dest, backupPath, { overwrite: true });\n        backedUp++;\n        if (opts.verbose) logInfo(`BACKUP  ${step.rel} -> ${path.basename(backupPath)}`);\n      }\n\n      await fs.copy(step.src, step.dest, { overwrite: true, errorOnExist: false });\n      overwritten++;\n      if (opts.verbose) logInfo(`WRITE   ${step.rel}`);\n    } catch (e) {\n      hadError = true;\n      logError(`Error processing ${step.rel}: ${(e as Error).message}`);\n    }\n  }\n\n  // 6) Summary\n  logSuccess(`Done: ${created} created, ${overwritten} overwritten, ${backedUp} backed up, ${skipped} skipped`);\n  return { ok: !hadError, plan } as const;\n}\n\n\n","import { parseArgs, formatHelp } from './cli/args';\nimport { resolvePaths } from './cli/paths';\nimport { copyTemplates } from './cli/copy';\nimport { logError, logInfo } from './cli/log';\n\nasync function main() {\n  try {\n    const opts = parseArgs(process.argv.slice(2));\n    if (opts.help) {\n      console.log(formatHelp());\n      process.exit(0);\n    }\n    if (opts.version) {\n      const version = process.env.npm_package_version || 'unknown';\n      console.log(version);\n      process.exit(0);\n    }\n\n    const paths = resolvePaths(opts.dest);\n    logInfo('CLI initialized');\n    const result = await copyTemplates({ opts, paths });\n    if (!result.ok) {\n      process.exit(1);\n    }\n  } catch (e) {\n    logError(e);\n    process.exit(1);\n  }\n}\nmain();\n\n\n"]}