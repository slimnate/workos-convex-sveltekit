{"version":3,"sources":["../src/cli/args.ts","../src/cli/paths.ts","../src/cli/log.ts","../src/cli/prompts.ts","../src/cli/copy.ts","../src/cli.ts"],"names":["path","pc","fs"],"mappings":";;;;;;;;;;;;AAYO,SAAS,UAAU,IAAA,EAA4B;AACrD,EAAA,MAAM,IAAA,GAAmB;AAAA,IACxB,IAAA,EAAM,QAAQ,GAAA,EAAI;AAAA,IAClB,KAAA,EAAO,KAAA;AAAA,IACP,GAAA,EAAK,KAAA;AAAA,IACL,MAAA,EAAQ,KAAA;AAAA,IACR,MAAA,EAAQ,KAAA;AAAA,IACR,KAAA,EAAO,KAAA;AAAA,IACP,OAAA,EAAS,KAAA;AAAA,IACT,IAAA,EAAM,KAAA;AAAA,IACN,OAAA,EAAS;AAAA,GACV;AAGA,EAAA,MAAM,aAAa,IAAA,CAAK,MAAA,CAAO,CAAC,CAAA,KAAM,MAAM,MAAM,CAAA;AAClD,EAAA,MAAM,EAAA,GAAK,UAAA,CAAW,MAAA,CAAO,QAAQ,CAAA,EAAE;AACvC,EAAA,KAAA,IAAS,GAAA,GAAM,EAAA,CAAG,IAAA,EAAK,EAAG,CAAC,IAAI,IAAA,EAAM,GAAA,GAAM,EAAA,CAAG,IAAA,EAAK,EAAG;AACrD,IAAA,MAAM,MAAM,GAAA,CAAI,KAAA;AAChB,IAAA,IAAI,QAAQ,QAAA,EAAU;AACrB,MAAA,MAAM,IAAA,GAAO,GAAG,IAAA,EAAK;AACrB,MAAA,IAAI,CAAC,IAAA,CAAK,IAAA,IAAQ,OAAO,IAAA,CAAK,UAAU,QAAA,EAAU;AACjD,QAAA,IAAA,CAAK,OAAO,IAAA,CAAK,KAAA;AAAA,MAClB;AACA,MAAA;AAAA,IACD;AACA,IAAA,IAAI,GAAA,CAAI,UAAA,CAAW,SAAS,CAAA,EAAG;AAC9B,MAAA,IAAA,CAAK,IAAA,GAAO,GAAA,CAAI,KAAA,CAAM,SAAA,CAAU,MAAM,CAAA;AACtC,MAAA;AAAA,IACD;AACA,IAAA,IAAI,QAAQ,SAAA,EAAW;AACtB,MAAA,IAAA,CAAK,KAAA,GAAQ,IAAA;AACb,MAAA;AAAA,IACD;AACA,IAAA,IAAI,GAAA,KAAQ,OAAA,IAAW,GAAA,KAAQ,IAAA,EAAM;AACpC,MAAA,IAAA,CAAK,GAAA,GAAM,IAAA;AACX,MAAA;AAAA,IACD;AACA,IAAA,IAAI,QAAQ,WAAA,EAAa;AACxB,MAAA,IAAA,CAAK,MAAA,GAAS,IAAA;AACd,MAAA;AAAA,IACD;AACA,IAAA,IAAI,QAAQ,UAAA,EAAY;AACvB,MAAA,IAAA,CAAK,MAAA,GAAS,IAAA;AACd,MAAA;AAAA,IACD;AACA,IAAA,IAAI,QAAQ,SAAA,EAAW;AACtB,MAAA,IAAA,CAAK,KAAA,GAAQ,IAAA;AACb,MAAA;AAAA,IACD;AACA,IAAA,IAAI,GAAA,KAAQ,WAAA,IAAe,GAAA,KAAQ,IAAA,EAAM;AACxC,MAAA,IAAA,CAAK,OAAA,GAAU,IAAA;AACf,MAAA;AAAA,IACD;AACA,IAAA,IAAI,GAAA,KAAQ,QAAA,IAAY,GAAA,KAAQ,IAAA,EAAM;AACrC,MAAA,IAAA,CAAK,IAAA,GAAO,IAAA;AACZ,MAAA;AAAA,IACD;AACA,IAAA,IAAI,GAAA,KAAQ,WAAA,IAAe,GAAA,KAAQ,IAAA,EAAM;AACxC,MAAA,IAAA,CAAK,OAAA,GAAU,IAAA;AACf,MAAA;AAAA,IACD;AAAA,EACD;AAEA,EAAA,OAAO,IAAA;AACR;AAEO,SAAS,UAAA,GAAqB;AACpC,EAAA,OAAO;AAAA,IACN,0CAAA;AAAA,IACA,EAAA;AAAA,IACA,UAAA;AAAA,IACA,gFAAA;AAAA,IACA,iDAAA;AAAA,IACA,iEAAA;AAAA,IACA,iEAAA;AAAA,IACA,4DAAA;AAAA,IACA,oFAAA;AAAA,IACA,qCAAA;AAAA,IACA,4CAAA;AAAA,IACA;AAAA,GACD,CAAE,KAAK,IAAI,CAAA;AACZ;ACzFO,SAAS,aAAa,QAAA,EAAkB;AAE7C,EAAA,MAAM,eAAe,aAAA,CAAc,IAAI,IAAI,eAAA,EAAiB,MAAA,CAAA,IAAA,CAAY,GAAG,CAAC,CAAA;AAC5E,EAAA,MAAM,QAAA,GAAW,EAAE,YAAA,EAAcA,KAAA,CAAK,OAAA,CAAQ,YAAY,CAAA,EAAG,QAAA,EAAUA,KAAA,CAAK,OAAA,CAAQ,QAAQ,CAAA,EAAE;AAC9F,EAAA,IAAI,CAAI,EAAA,CAAA,UAAA,CAAW,QAAA,CAAS,YAAY,CAAA,EAAG;AACzC,IAAA,MAAM,IAAI,KAAA,CAAM,CAAA,kCAAA,EAAqC,QAAA,CAAS,YAAY,CAAA,CAAE,CAAA;AAAA,EAC9E;AACA,EAAA,OAAO,QAAA;AACT;ACVO,SAAS,QAAQ,GAAA,EAAc;AAAE,EAAA,OAAA,CAAQ,IAAIC,GAAA,CAAG,IAAA,CAAK,MAAA,CAAO,GAAG,CAAC,CAAC,CAAA;AAAG;AACpE,SAAS,QAAQ,GAAA,EAAc;AAAE,EAAA,OAAA,CAAQ,KAAKA,GAAA,CAAG,MAAA,CAAO,MAAA,CAAO,GAAG,CAAC,CAAC,CAAA;AAAG;AACvE,SAAS,WAAW,GAAA,EAAc;AAAE,EAAA,OAAA,CAAQ,IAAIA,GAAA,CAAG,KAAA,CAAM,MAAA,CAAO,GAAG,CAAC,CAAC,CAAA;AAAG;AACxE,SAAS,SAAS,GAAA,EAAc;AAAE,EAAA,OAAA,CAAQ,MAAMA,GAAA,CAAG,GAAA,CAAI,MAAA,CAAO,GAAG,CAAC,CAAC,CAAA;AAAG;ACE7E,eAAsB,cAAA,CACrB,OAAA,EACA,OAAA,EACA,QAAA,EACkB;AAElB,EAAA,IAAI;AACH,IAAA,MAAM,OAAA,GAAU,MAAMC,GAAAA,CAAG,QAAA,CAAS,UAAU,MAAM,CAAA,CAAE,KAAA,CAAM,CAAC,GAAA,KAAQ;AAClE,MAAA,OAAA,CAAQ,KAAA,CAAM,CAAA,6BAAA,EAAgC,QAAQ,CAAA,CAAA,CAAA,EAAK,GAAG,CAAA;AAC9D,MAAA,OAAO,EAAA;AAAA,IACR,CAAC,CAAA;AACD,IAAA,MAAM,OAAA,GAAU,MAAMA,GAAAA,CAAG,QAAA,CAAS,SAAS,MAAM,CAAA,CAAE,KAAA,CAAM,CAAC,GAAA,KAAQ;AACjE,MAAA,OAAA,CAAQ,KAAA,CAAM,CAAA,6BAAA,EAAgC,OAAO,CAAA,CAAA,CAAA,EAAK,GAAG,CAAA;AAC7D,MAAA,OAAO,EAAA;AAAA,IACR,CAAC,CAAA;AAED,IAAA,MAAM,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,OAAA,EAAS,IAAI,CAAA;AAC7C,IAAA,MAAM,OAAA,GAAU,OAAA,CAAQ,OAAA,CAAQ,OAAA,EAAS,IAAI,CAAA;AAC7C,IAAA,MAAM,KAAA,GAAQ,mBAAA;AAAA,MACb,OAAA,GAAU,aAAA;AAAA,MACV,OAAA,GAAU,aAAA;AAAA,MACV,OAAA;AAAA,MACA,OAAA;AAAA,MACA,UAAA;AAAA,MACA;AAAA,KACD;AAEA,IAAA,OAAA,CAAQ,IAAID,GAAAA,CAAG,IAAA,CAAK,CAAA,SAAA,EAAY,OAAO,EAAE,CAAC,CAAA;AAC1C,IAAA,MAAM,KAAA,GAAQ,KAAA,CAAM,KAAA,CAAM,IAAI,CAAA;AAC9B,IAAA,KAAA,MAAW,QAAQ,KAAA,EAAO;AACzB,MAAA,IAAI,IAAA,CAAK,WAAW,GAAG,CAAA,IAAK,CAAC,IAAA,CAAK,UAAA,CAAW,KAAK,CAAA,EAAG;AACpD,QAAA,OAAA,CAAQ,GAAA,CAAIA,GAAAA,CAAG,KAAA,CAAM,IAAI,CAAC,CAAA;AAAA,MAC3B,CAAA,MAAA,IAAW,KAAK,UAAA,CAAW,GAAG,KAAK,CAAC,IAAA,CAAK,UAAA,CAAW,KAAK,CAAA,EAAG;AAC3D,QAAA,OAAA,CAAQ,GAAA,CAAIA,GAAAA,CAAG,GAAA,CAAI,IAAI,CAAC,CAAA;AAAA,MACzB,CAAA,MAAA,IAAW,IAAA,CAAK,UAAA,CAAW,IAAI,CAAA,EAAG;AACjC,QAAA,OAAA,CAAQ,GAAA,CAAIA,GAAAA,CAAG,IAAA,CAAK,IAAI,CAAC,CAAA;AAAA,MAC1B,CAAA,MAAA,IACC,IAAA,CAAK,UAAA,CAAW,MAAM,CAAA,IACtB,KAAK,UAAA,CAAW,OAAO,CAAA,IACvB,IAAA,CAAK,UAAA,CAAW,OAAO,KACvB,IAAA,CAAK,UAAA,CAAW,KAAK,CAAA,IACrB,IAAA,CAAK,UAAA,CAAW,KAAK,CAAA,IACrB,IAAA,CAAK,UAAA,CAAW,KAAK,CAAA,EACpB;AACD,QAAA,OAAA,CAAQ,GAAA,CAAIA,GAAAA,CAAG,GAAA,CAAI,IAAI,CAAC,CAAA;AAAA,MACzB,CAAA,MAAO;AACN,QAAA,OAAA,CAAQ,IAAI,IAAI,CAAA;AAAA,MACjB;AAAA,IACD;AAAA,EACD,SAAS,GAAA,EAAK;AAEb,IAAA,OAAA,CAAQ,KAAA,CAAM,CAAA,oCAAA,EAAuC,OAAO,CAAA,CAAA,CAAA,EAAK,GAAG,CAAA;AAAA,EACrE;AAGA,EAAA,MAAM,IAAI,OAAA,CAAQ,CAAC,YAAY,UAAA,CAAW,OAAA,EAAS,CAAC,CAAC,CAAA;AAErD,EAAA,MAAM,QAAA,GAAW,aAAa,OAAO;AAAA,4FAAA,CAAA;AACrC,EAAA,MAAM,EAAA,GAAK,QAAA,CAAS,eAAA,CAAgB,EAAE,KAAA,EAAO,QAAQ,KAAA,EAAO,MAAA,EAAQ,OAAA,CAAQ,MAAA,EAAQ,CAAA;AACpF,EAAA,IAAI;AACH,IAAA,MAAM,MAAA,GAAiB,MAAM,IAAI,OAAA,CAAQ,CAAC,YAAY,EAAA,CAAG,QAAA,CAAS,QAAA,EAAU,OAAO,CAAC,CAAA;AACpF,IAAA,MAAM,GAAA,GAAA,CAAO,MAAA,IAAU,EAAA,EAAI,IAAA,EAAK;AAChC,IAAA,MAAM,CAAA,GAAI,IAAI,WAAA,EAAY;AAG1B,IAAA,IAAI,GAAA,KAAQ,OAAO,CAAA,KAAM,KAAA,IAAS,MAAM,UAAA,IAAc,CAAA,KAAM,WAAW,OAAO,SAAA;AAC9E,IAAA,IAAI,QAAQ,GAAA,IAAO,CAAA,KAAM,WAAA,IAAe,CAAA,KAAM,YAAY,OAAO,UAAA;AACjE,IAAA,IAAI,MAAM,GAAA,IAAO,CAAA,KAAM,eAAA,IAAmB,CAAA,KAAM,gBAAgB,OAAO,cAAA;AAEvE,IAAA,IAAI,CAAA,KAAM,GAAA,IAAO,CAAA,KAAM,WAAA,EAAa,OAAO,WAAA;AAC3C,IAAA,IAAI,CAAA,KAAM,GAAA,IAAO,CAAA,KAAM,MAAA,EAAQ,OAAO,MAAA;AACtC,IAAA,IAAI,CAAA,KAAM,GAAA,IAAO,CAAA,KAAM,QAAA,EAAU,OAAO,QAAA;AACxC,IAAA,IAAI,CAAA,KAAM,GAAA,IAAO,CAAA,KAAM,OAAA,EAAS,OAAO,OAAA;AAEvC,IAAA,OAAO,MAAA;AAAA,EACR,CAAA,SAAE;AACD,IAAA,EAAA,CAAG,KAAA,EAAM;AAAA,EACV;AACD;;;ACxEA,eAAe,UAAA,CACd,OAAA,EACA,QAAA,EACA,OAAA,EACA,IAAA,EACkB;AAClB,EAAA,MAAM,GAAA,GAAMD,KAAAA,CAAK,OAAA,CAAQ,OAAO,EAAE,WAAA,EAAY;AAG9C,EAAA,MAAM,cAAA,GAAiB;AAAA,IACtB,KAAA;AAAA,IACA,KAAA;AAAA,IACA,MAAA;AAAA,IACA,MAAA;AAAA,IACA,SAAA;AAAA,IACA,MAAA;AAAA,IACA,MAAA;AAAA,IACA,OAAA;AAAA,IACA,OAAA;AAAA,IACA;AAAA,GACD;AAEA,EAAA,IAAI,CAAC,cAAA,CAAe,QAAA,CAAS,GAAG,CAAA,EAAG;AAElC,IAAA,OAAOE,GAAAA,CAAG,QAAA,CAAS,OAAA,EAAS,MAAM,CAAA;AAAA,EACnC;AAEA,EAAA,IAAI;AACH,IAAA,MAAM,CAAC,OAAA,EAAS,QAAQ,CAAA,GAAI,MAAM,QAAQ,GAAA,CAAI;AAAA,MAC7CA,GAAAA,CAAG,QAAA,CAAS,OAAA,EAAS,MAAM,CAAA;AAAA,MAC3BA,GAAAA,CAAG,QAAA,CAAS,QAAA,EAAU,MAAM;AAAA,KAC5B,CAAA;AAGD,IAAA,IAAI,YAAY,QAAA,EAAU;AACzB,MAAA,IAAI,IAAA,CAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,QAAA,EAAW,OAAO,CAAA,CAAE,CAAA;AAC9C,MAAA,OAAO,QAAA;AAAA,IACR;AAIA,IAAA,MAAM,cAAA,GAAiB,CAAA;AAAA,EACvB,QAAQ;AAAA;AAAA,EACR,OAAO;AAAA;AAAA,CAAA;AAGP,IAAA,OAAO,cAAA;AAAA,EACR,SAAS,CAAA,EAAG;AAEX,IAAA,MAAM,IAAI,KAAA,CAAM,CAAA,qBAAA,EAAwB,OAAO,CAAA,EAAA,EAAM,CAAA,CAAY,OAAO,CAAA,CAAE,CAAA;AAAA,EAC3E;AACD;AAEA,eAAsB,aAAA,CAAc;AAAA,EACnC,IAAA;AAAA,EACA;AACD,CAAA,EAGG;AAEF,EAAA,MAAM,QAAA,GAAW,CAAC,MAAM,CAAA;AACxB,EAAA,MAAM,MAAA,GAAS,CAAC,oBAAA,EAAsB,YAAA,EAAc,YAAY,CAAA;AAChE,EAAA,MAAM,QAAA,GAAW,MAAM,EAAA,CAAG,QAAA,EAAU;AAAA,IACnC,KAAK,KAAA,CAAM,YAAA;AAAA,IACX,GAAA,EAAK,IAAA;AAAA,IACL,SAAA,EAAW,IAAA;AAAA,IACX;AAAA,GACA,CAAA;AAGD,EAAA,MAAM,OAAmB,EAAC;AAC1B,EAAA,KAAA,MAAW,OAAO,QAAA,EAAU;AAC3B,IAAA,MAAM,GAAA,GAAMF,KAAAA,CAAK,IAAA,CAAK,KAAA,CAAM,cAAc,GAAG,CAAA;AAC7C,IAAA,MAAM,IAAA,GAAOA,KAAAA,CAAK,IAAA,CAAK,KAAA,CAAM,UAAU,GAAG,CAAA;AAC1C,IAAA,MAAM,MAAA,GAAS,MAAME,GAAAA,CAAG,UAAA,CAAW,IAAI,CAAA;AACvC,IAAA,IAAI,CAAC,MAAA,EAAQ;AACZ,MAAA,IAAA,CAAK,KAAK,EAAE,IAAA,EAAM,UAAU,GAAA,EAAK,IAAA,EAAM,KAAK,CAAA;AAC5C,MAAA;AAAA,IACD;AAEA,IAAA,IAAI;AACH,MAAA,MAAM,CAAC,MAAA,EAAQ,OAAO,CAAA,GAAI,MAAM,QAAQ,GAAA,CAAI,CAACA,GAAAA,CAAG,QAAA,CAAS,GAAG,CAAA,EAAGA,GAAAA,CAAG,QAAA,CAAS,IAAI,CAAC,CAAC,CAAA;AACjF,MAAA,IAAI,MAAA,CAAO,MAAA,CAAO,OAAO,CAAA,EAAG;AAC3B,QAAA,IAAA,CAAK,KAAK,EAAE,IAAA,EAAM,QAAQ,GAAA,EAAK,IAAA,EAAM,KAAK,CAAA;AAAA,MAC3C,CAAA,MAAO;AACN,QAAA,IAAA,CAAK,KAAK,EAAE,IAAA,EAAM,aAAa,GAAA,EAAK,IAAA,EAAM,KAAK,CAAA;AAAA,MAChD;AAAA,IACD,CAAA,CAAA,MAAQ;AAEP,MAAA,IAAA,CAAK,KAAK,EAAE,IAAA,EAAM,aAAa,GAAA,EAAK,IAAA,EAAM,KAAK,CAAA;AAAA,IAChD;AAAA,EACD;AAGA,EAAA,IAAI,CAAC,QAAQ,MAAA,CAAO,KAAA,IAAS,CAAC,IAAA,CAAK,KAAA,IAAS,CAAC,IAAA,CAAK,GAAA,EAAK;AACtD,IAAA,MAAM,eAAe,IAAA,CAAK,IAAA,CAAK,CAAC,CAAA,KAAM,CAAA,CAAE,SAAS,WAAW,CAAA;AAC5D,IAAA,IAAI,YAAA,EAAc;AACjB,MAAA,OAAA,CAAQ,8DAA8D,CAAA;AACtE,MAAA,OAAO,EAAE,EAAA,EAAI,KAAA,EAAO,IAAA,EAAK;AAAA,IAC1B;AAAA,EACD;AAGA,EAAA,MAAM,OAAA,GAAU,KAAK,MAAA,CAAO,CAAC,MAAM,CAAA,CAAE,IAAA,KAAS,QAAQ,CAAA,CAAE,MAAA;AACxD,EAAA,MAAM,UAAA,GAAa,KAAK,MAAA,CAAO,CAAC,MAAM,CAAA,CAAE,IAAA,KAAS,WAAW,CAAA,CAAE,MAAA;AAC9D,EAAA,MAAM,KAAA,GAAQ,KAAK,MAAA,CAAO,CAAC,MAAM,CAAA,CAAE,IAAA,KAAS,MAAM,CAAA,CAAE,MAAA;AACpD,EAAA,IAAI,KAAK,MAAA,EAAQ;AAChB,IAAA,IAAI,KAAK,OAAA,EAAS;AACjB,MAAA,KAAA,MAAW,KAAK,IAAA,EAAM;AACrB,QAAA,IAAI,KAAA,GAAQ,EAAE,IAAA,KAAS,QAAA,GAAW,WAAW,CAAA,CAAE,IAAA,KAAS,cAAc,WAAA,GAAc,MAAA;AACpF,QAAA,IAAI,CAAA,CAAE,IAAA,KAAS,WAAA,IAAe,IAAA,CAAK,KAAA,EAAO;AACzC,UAAA,KAAA,GAAQ,OAAA;AAAA,QACT;AACA,QAAA,OAAA,CAAQ,CAAA,EAAG,KAAK,CAAA,EAAA,EAAK,CAAA,CAAE,GAAG,CAAA,CAAE,CAAA;AAAA,MAC7B;AAAA,IACD;AACA,IAAA,MAAM,MAAA,GAAS,IAAA,CAAK,KAAA,GAAQ,OAAA,GAAU,WAAA;AACtC,IAAA,OAAA,CAAQ,CAAA,MAAA,EAAS,OAAO,CAAA,SAAA,EAAY,UAAU,IAAI,MAAM,CAAA,EAAA,EAAK,KAAK,CAAA,KAAA,CAAO,CAAA;AACzE,IAAA,OAAO,EAAE,EAAA,EAAI,IAAA,EAAM,IAAA,EAAK;AAAA,EACzB;AAGA,EAAA,IAAI,OAAA,GAAU,CAAA;AACd,EAAA,IAAI,WAAA,GAAc,CAAA;AAClB,EAAA,IAAI,MAAA,GAAS,CAAA;AACb,EAAA,IAAI,QAAA,GAAW,CAAA;AACf,EAAA,IAAI,OAAA,GAAU,CAAA;AACd,EAAA,IAAI,QAAA,GAAW,KAAA;AAEf,EAAA,IAAI,MAAA,GAAyD,IAAA;AAE7D,EAAA,KAAA,MAAW,QAAQ,IAAA,EAAM;AACxB,IAAA,IAAI;AAEH,MAAA,MAAMA,IAAG,SAAA,CAAUF,KAAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,IAAI,CAAC,CAAA;AAG1C,MAAA,IAAI,IAAA,CAAK,SAAS,MAAA,EAAQ;AACzB,QAAA,IAAI,KAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,QAAA,EAAW,IAAA,CAAK,GAAG,CAAA,CAAE,CAAA;AAC/C,QAAA,OAAA,EAAA;AACA,QAAA;AAAA,MACD;AAEA,MAAA,IAAI,IAAA,CAAK,SAAS,QAAA,EAAU;AAC3B,QAAA,IAAI,KAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,QAAA,EAAW,IAAA,CAAK,GAAG,CAAA,CAAE,CAAA;AAC/C,QAAA,MAAME,GAAAA,CAAG,IAAA,CAAK,IAAA,CAAK,GAAA,EAAK,IAAA,CAAK,IAAA,EAAM,EAAE,SAAA,EAAW,KAAA,EAAO,YAAA,EAAc,KAAA,EAAO,CAAA;AAC5E,QAAA,OAAA,EAAA;AACA,QAAA;AAAA,MACD;AAGA,MAAA,IAAI,QAAA,GAAsD,WAAA;AAE1D,MAAA,IAAI,KAAK,KAAA,EAAO;AACf,QAAA,QAAA,GAAW,OAAA;AAAA,MACZ,CAAA,MAAA,IAAW,KAAK,MAAA,EAAQ;AACvB,QAAA,QAAA,GAAW,QAAA;AAAA,MACZ,CAAA,MAAA,IAAW,IAAA,CAAK,KAAA,IAAS,IAAA,CAAK,GAAA,EAAK;AAClC,QAAA,QAAA,GAAW,WAAA;AAAA,MACZ,CAAA,MAAA,IAAW,WAAW,cAAA,EAAgB;AACrC,QAAA,QAAA,GAAW,WAAA;AAAA,MACZ,CAAA,MAAA,IAAW,WAAW,SAAA,EAAW;AAChC,QAAA,QAAA,GAAW,MAAA;AAAA,MACZ,CAAA,MAAA,IAAW,WAAW,UAAA,EAAY;AACjC,QAAA,QAAA,GAAW,OAAA;AACX,QAAA,IAAI,KAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,mBAAA,EAAsB,IAAA,CAAK,GAAG,CAAA,CAAE,CAAA;AAAA,MAC3D,CAAA,MAAA,IAAW,OAAA,CAAQ,MAAA,CAAO,KAAA,EAAO;AAChC,QAAA,MAAM,MAAA,GAAS,MAAM,cAAA,CAAe,IAAA,CAAK,KAAK,IAAA,CAAK,GAAA,EAAK,KAAK,IAAI,CAAA;AACjE,QAAA,IAAI,WAAW,cAAA,EAAgB;AAC9B,UAAA,MAAA,GAAS,cAAA;AACT,UAAA,QAAA,GAAW,WAAA;AAAA,QACZ,CAAA,MAAA,IAAW,WAAW,SAAA,EAAW;AAChC,UAAA,MAAA,GAAS,SAAA;AACT,UAAA,QAAA,GAAW,MAAA;AAAA,QACZ,CAAA,MAAA,IAAW,WAAW,UAAA,EAAY;AACjC,UAAA,MAAA,GAAS,UAAA;AACT,UAAA,QAAA,GAAW,OAAA;AACX,UAAA,IAAI,IAAA,CAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,qDAAA,CAAuD,CAAA;AAAA,QAClF,CAAA,MAAA,IAAW,WAAW,WAAA,EAAa;AAClC,UAAA,QAAA,GAAW,WAAA;AAAA,QACZ,CAAA,MAAA,IAAW,WAAW,QAAA,EAAU;AAC/B,UAAA,QAAA,GAAW,QAAA;AAAA,QACZ,CAAA,MAAA,IAAW,WAAW,OAAA,EAAS;AAC9B,UAAA,QAAA,GAAW,OAAA;AAAA,QACZ,CAAA,MAAO;AACN,UAAA,QAAA,GAAW,MAAA;AAAA,QACZ;AAAA,MACD,CAAA,MAAO;AAEN,QAAA,OAAA,CAAQ,CAAA,UAAA,EAAa,IAAA,CAAK,GAAG,CAAA,4CAAA,CAA8C,CAAA;AAC3E,QAAA,OAAO,EAAE,EAAA,EAAI,KAAA,EAAO,IAAA,EAAK;AAAA,MAC1B;AAEA,MAAA,IAAI,aAAa,MAAA,EAAQ;AACxB,QAAA,IAAI,KAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,QAAA,EAAW,IAAA,CAAK,GAAG,CAAA,CAAE,CAAA;AAC/C,QAAA,OAAA,EAAA;AACA,QAAA;AAAA,MACD;AAEA,MAAA,IAAI,aAAa,OAAA,EAAS;AACzB,QAAA,IAAI;AACH,UAAA,MAAM,aAAA,GAAgB,MAAM,UAAA,CAAW,IAAA,CAAK,KAAK,IAAA,CAAK,IAAA,EAAM,IAAA,CAAK,GAAA,EAAK,IAAI,CAAA;AAC1E,UAAA,MAAMA,GAAAA,CAAG,SAAA,CAAU,IAAA,CAAK,IAAA,EAAM,eAAe,MAAM,CAAA;AACnD,UAAA,MAAA,EAAA;AACA,UAAA,IAAI,KAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,QAAA,EAAW,IAAA,CAAK,GAAG,CAAA,CAAE,CAAA;AAC/C,UAAA;AAAA,QACD,SAAS,CAAA,EAAG;AACX,UAAA,OAAA,CAAQ,mBAAmB,IAAA,CAAK,GAAG,CAAA,YAAA,EAAgB,CAAA,CAAY,OAAO,CAAA,CAAE,CAAA;AACxE,UAAA,IAAI,KAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,QAAA,EAAW,IAAA,CAAK,GAAG,CAAA,CAAE,CAAA;AAC/C,UAAA,OAAA,EAAA;AACA,UAAA;AAAA,QACD;AAAA,MACD;AAEA,MAAA,IAAI,aAAa,QAAA,EAAU;AAC1B,QAAA,MAAM,aAAa,CAAA,EAAG,IAAA,CAAK,IAAI,CAAA,KAAA,EAAQ,IAAA,CAAK,KAAK,CAAA,CAAA;AACjD,QAAA,MAAMA,GAAAA,CAAG,KAAK,IAAA,CAAK,IAAA,EAAM,YAAY,EAAE,SAAA,EAAW,MAAM,CAAA;AACxD,QAAA,QAAA,EAAA;AACA,QAAA,IAAI,IAAA,CAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,QAAA,EAAW,IAAA,CAAK,GAAG,CAAA,IAAA,EAAOF,KAAAA,CAAK,QAAA,CAAS,UAAU,CAAC,CAAA,CAAE,CAAA;AAAA,MAChF;AAEA,MAAA,MAAME,GAAAA,CAAG,IAAA,CAAK,IAAA,CAAK,GAAA,EAAK,IAAA,CAAK,IAAA,EAAM,EAAE,SAAA,EAAW,IAAA,EAAM,YAAA,EAAc,KAAA,EAAO,CAAA;AAC3E,MAAA,WAAA,EAAA;AACA,MAAA,IAAI,KAAK,OAAA,EAAS,OAAA,CAAQ,CAAA,QAAA,EAAW,IAAA,CAAK,GAAG,CAAA,CAAE,CAAA;AAAA,IAChD,SAAS,CAAA,EAAG;AACX,MAAA,QAAA,GAAW,IAAA;AACX,MAAA,QAAA,CAAS,oBAAoB,IAAA,CAAK,GAAG,CAAA,EAAA,EAAM,CAAA,CAAY,OAAO,CAAA,CAAE,CAAA;AAAA,IACjE;AAAA,EACD;AAGA,EAAA,MAAM,QAAQ,EAAC;AACf,EAAA,IAAI,UAAU,CAAA,EAAG,KAAA,CAAM,IAAA,CAAK,CAAA,EAAG,OAAO,CAAA,QAAA,CAAU,CAAA;AAChD,EAAA,IAAI,cAAc,CAAA,EAAG,KAAA,CAAM,IAAA,CAAK,CAAA,EAAG,WAAW,CAAA,YAAA,CAAc,CAAA;AAC5D,EAAA,IAAI,SAAS,CAAA,EAAG,KAAA,CAAM,IAAA,CAAK,CAAA,EAAG,MAAM,CAAA,OAAA,CAAS,CAAA;AAC7C,EAAA,IAAI,WAAW,CAAA,EAAG,KAAA,CAAM,IAAA,CAAK,CAAA,EAAG,QAAQ,CAAA,UAAA,CAAY,CAAA;AACpD,EAAA,IAAI,UAAU,CAAA,EAAG,KAAA,CAAM,IAAA,CAAK,CAAA,EAAG,OAAO,CAAA,QAAA,CAAU,CAAA;AAChD,EAAA,UAAA,CAAW,CAAA,MAAA,EAAS,KAAA,CAAM,IAAA,CAAK,IAAI,CAAC,CAAA,CAAE,CAAA;AACtC,EAAA,OAAO,EAAE,EAAA,EAAI,CAAC,QAAA,EAAU,IAAA,EAAK;AAC9B;;;ACvPA,eAAe,IAAA,GAAO;AACrB,EAAA,IAAI;AACH,IAAA,MAAM,OAAO,SAAA,CAAU,OAAA,CAAQ,IAAA,CAAK,KAAA,CAAM,CAAC,CAAC,CAAA;AAC5C,IAAA,IAAI,KAAK,IAAA,EAAM;AACd,MAAA,OAAA,CAAQ,GAAA,CAAI,YAAY,CAAA;AACxB,MAAA,OAAA,CAAQ,KAAK,CAAC,CAAA;AAAA,IACf;AACA,IAAA,IAAI,KAAK,OAAA,EAAS;AACjB,MAAA,MAAM,OAAA,GAAU,OAAA,CAAQ,GAAA,CAAI,mBAAA,IAAuB,SAAA;AACnD,MAAA,OAAA,CAAQ,IAAI,OAAO,CAAA;AACnB,MAAA,OAAA,CAAQ,KAAK,CAAC,CAAA;AAAA,IACf;AAEA,IAAA,MAAM,KAAA,GAAQ,YAAA,CAAa,IAAA,CAAK,IAAI,CAAA;AACpC,IAAA,OAAA,CAAQ,iBAAiB,CAAA;AACzB,IAAA,MAAM,SAAS,MAAM,aAAA,CAAc,EAAE,IAAA,EAAM,OAAO,CAAA;AAClD,IAAA,IAAI,CAAC,OAAO,EAAA,EAAI;AACf,MAAA,OAAA,CAAQ,KAAK,CAAC,CAAA;AAAA,IACf;AAAA,EACD,SAAS,CAAA,EAAG;AACX,IAAA,QAAA,CAAS,CAAC,CAAA;AACV,IAAA,OAAA,CAAQ,KAAK,CAAC,CAAA;AAAA,EACf;AACD;AACA,IAAA,EAAK","file":"cli.js","sourcesContent":["export type CliOptions = {\n\tdest: string;\n\tforce: boolean;\n\tyes: boolean;\n\tdryRun: boolean;\n\tbackup: boolean;\n\tmerge: boolean;\n\tverbose: boolean;\n\thelp: boolean;\n\tversion: boolean;\n};\n\nexport function parseArgs(argv: string[]): CliOptions {\n\tconst opts: CliOptions = {\n\t\tdest: process.cwd(),\n\t\tforce: false,\n\t\tyes: false,\n\t\tdryRun: false,\n\t\tbackup: false,\n\t\tmerge: false,\n\t\tverbose: false,\n\t\thelp: false,\n\t\tversion: false\n\t};\n\n\t// Ignore optional positional subcommand 'copy'\n\tconst normalized = argv.filter((a) => a !== 'copy');\n\tconst it = normalized[Symbol.iterator]();\n\tfor (let cur = it.next(); !cur.done; cur = it.next()) {\n\t\tconst arg = cur.value as string;\n\t\tif (arg === '--dest') {\n\t\t\tconst next = it.next();\n\t\t\tif (!next.done && typeof next.value === 'string') {\n\t\t\t\topts.dest = next.value;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (arg.startsWith('--dest=')) {\n\t\t\topts.dest = arg.slice('--dest='.length);\n\t\t\tcontinue;\n\t\t}\n\t\tif (arg === '--force') {\n\t\t\topts.force = true;\n\t\t\tcontinue;\n\t\t}\n\t\tif (arg === '--yes' || arg === '-y') {\n\t\t\topts.yes = true;\n\t\t\tcontinue;\n\t\t}\n\t\tif (arg === '--dry-run') {\n\t\t\topts.dryRun = true;\n\t\t\tcontinue;\n\t\t}\n\t\tif (arg === '--backup') {\n\t\t\topts.backup = true;\n\t\t\tcontinue;\n\t\t}\n\t\tif (arg === '--merge') {\n\t\t\topts.merge = true;\n\t\t\tcontinue;\n\t\t}\n\t\tif (arg === '--verbose' || arg === '-v') {\n\t\t\topts.verbose = true;\n\t\t\tcontinue;\n\t\t}\n\t\tif (arg === '--help' || arg === '-h') {\n\t\t\topts.help = true;\n\t\t\tcontinue;\n\t\t}\n\t\tif (arg === '--version' || arg === '-V') {\n\t\t\topts.version = true;\n\t\t\tcontinue;\n\t\t}\n\t}\n\n\treturn opts;\n}\n\nexport function formatHelp(): string {\n\treturn [\n\t\t'workos-convex-sveltekit [copy] [options]',\n\t\t'',\n\t\t'Options:',\n\t\t'  --dest <path>     Destination directory (default: current working directory)',\n\t\t'  --force           Overwrite without prompting',\n\t\t'  --yes, -y         Assume yes to all prompts (non-interactive)',\n\t\t'  --dry-run         Print planned actions without writing files',\n\t\t'  --backup          Backup existing files before overwrite',\n\t\t'  --merge           Merge changes with Git-style conflict markers (for code files)',\n\t\t'  --verbose, -v     Verbose logging',\n\t\t'  --help, -h        Show this help message',\n\t\t'  --version, -V     Show version'\n\t].join('\\n');\n}\n","import { fileURLToPath } from 'node:url';\nimport path from 'node:path';\nimport * as fs from 'node:fs';\n\nexport function resolvePaths(destRoot: string) {\n  // dist/cli.js sits in dist/; templates/ is at ../templates relative to dist/cli.js\n  const templateRoot = fileURLToPath(new URL('../templates/', import.meta.url));\n  const resolved = { templateRoot: path.resolve(templateRoot), destRoot: path.resolve(destRoot) };\n  if (!fs.existsSync(resolved.templateRoot)) {\n    throw new Error(`Templates directory not found at: ${resolved.templateRoot}`);\n  }\n  return resolved;\n}\n\n\n","import pc from 'picocolors';\n\nexport function logInfo(msg: unknown) { console.log(pc.cyan(String(msg))); }\nexport function logWarn(msg: unknown) { console.warn(pc.yellow(String(msg))); }\nexport function logSuccess(msg: unknown) { console.log(pc.green(String(msg))); }\nexport function logError(err: unknown) { console.error(pc.red(String(err))); }\n\n\n","import readline from 'node:readline';\nimport fs from 'node:fs/promises';\nimport pc from 'picocolors';\nimport { createTwoFilesPatch } from 'diff';\n\ntype Choice = 'overwrite' | 'skip' | 'overwriteAll' | 'skipAll' | 'backup' | 'merge' | 'mergeAll';\n\nexport async function promptConflict(\n\trelPath: string,\n\tsrcPath: string,\n\tdestPath: string\n): Promise<Choice> {\n\t// Show a unified diff before prompting\n\ttry {\n\t\tconst oldText = await fs.readFile(destPath, 'utf8').catch((err) => {\n\t\t\tconsole.error(`Failed to read existing file ${destPath}:`, err);\n\t\t\treturn '';\n\t\t});\n\t\tconst newText = await fs.readFile(srcPath, 'utf8').catch((err) => {\n\t\t\tconsole.error(`Failed to read template file ${srcPath}:`, err);\n\t\t\treturn '';\n\t\t});\n\t\t// Normalize line endings to avoid noisy diffs from CRLF vs LF-only differences\n\t\tconst oldNorm = oldText.replace(/\\r\\n/g, '\\n');\n\t\tconst newNorm = newText.replace(/\\r\\n/g, '\\n');\n\t\tconst patch = createTwoFilesPatch(\n\t\t\trelPath + ' (existing)',\n\t\t\trelPath + ' (template)',\n\t\t\toldNorm,\n\t\t\tnewNorm,\n\t\t\t'existing',\n\t\t\t'template'\n\t\t);\n\n\t\tconsole.log(pc.bold(`Diff for ${relPath}`));\n\t\tconst lines = patch.split('\\n');\n\t\tfor (const line of lines) {\n\t\t\tif (line.startsWith('+') && !line.startsWith('+++')) {\n\t\t\t\tconsole.log(pc.green(line));\n\t\t\t} else if (line.startsWith('-') && !line.startsWith('---')) {\n\t\t\t\tconsole.log(pc.red(line));\n\t\t\t} else if (line.startsWith('@@')) {\n\t\t\t\tconsole.log(pc.cyan(line));\n\t\t\t} else if (\n\t\t\t\tline.startsWith('diff') ||\n\t\t\t\tline.startsWith('index') ||\n\t\t\t\tline.startsWith('Index') ||\n\t\t\t\tline.startsWith('---') ||\n\t\t\t\tline.startsWith('+++') ||\n\t\t\t\tline.startsWith('===')\n\t\t\t) {\n\t\t\t\tconsole.log(pc.dim(line));\n\t\t\t} else {\n\t\t\t\tconsole.log(line);\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\t// If diff fails, continue without blocking prompts\n\t\tconsole.error(`Failed to generate unified diff for ${relPath}:`, err);\n\t}\n\n\t// Allow stdout to flush diff output before showing the prompt\n\tawait new Promise((resolve) => setTimeout(resolve, 0));\n\n\tconst question = `Conflict: ${relPath}\\nChoose: [o]verwrite, [s]kip, [b]ackup, [m]erge, overwrite [a]ll, skip [A]ll, merge [M] all: `;\n\tconst rl = readline.createInterface({ input: process.stdin, output: process.stdout });\n\ttry {\n\t\tconst answer: string = await new Promise((resolve) => rl.question(question, resolve));\n\t\tconst raw = (answer || '').trim();\n\t\tconst a = raw.toLowerCase();\n\t\t// Check for \"all\" options first (before single-letter shortcuts)\n\t\t// Accept explicit uppercase 'A' shortcut for Skip All, as shown in the prompt\n\t\tif (raw === 'A' || a === 'all' || a === 'skip all' || a === 'skipall') return 'skipAll';\n\t\tif (raw === 'M' || a === 'merge all' || a === 'mergeall') return 'mergeAll';\n\t\tif (a === 'a' || a === 'overwrite all' || a === 'overwriteall') return 'overwriteAll';\n\t\t// Then check single actions\n\t\tif (a === 'o' || a === 'overwrite') return 'overwrite';\n\t\tif (a === 's' || a === 'skip') return 'skip';\n\t\tif (a === 'b' || a === 'backup') return 'backup';\n\t\tif (a === 'm' || a === 'merge') return 'merge';\n\t\t// default to skip on unknown\n\t\treturn 'skip';\n\t} finally {\n\t\trl.close();\n\t}\n}\n","import type { CliOptions } from './args';\nimport fg from 'fast-glob';\nimport fs from 'fs-extra';\nimport path from 'node:path';\nimport { logInfo, logWarn, logSuccess, logError } from './log';\nimport { promptConflict } from './prompts';\n\ntype PlanItem = { kind: 'create' | 'overwrite' | 'skip'; src: string; dest: string; rel: string };\n\n/**\n * Merge two files using Git-style conflict markers for code files\n * Inserts conflict markers allowing manual resolution\n */\nasync function mergeFiles(\n\tsrcPath: string,\n\tdestPath: string,\n\trelPath: string,\n\topts: CliOptions\n): Promise<string> {\n\tconst ext = path.extname(relPath).toLowerCase();\n\n\t// Code file extensions that support conflict markers\n\tconst codeExtensions = [\n\t\t'.js',\n\t\t'.ts',\n\t\t'.jsx',\n\t\t'.tsx',\n\t\t'.svelte',\n\t\t'.vue',\n\t\t'.css',\n\t\t'.scss',\n\t\t'.html',\n\t\t'.json'\n\t];\n\n\tif (!codeExtensions.includes(ext)) {\n\t\t// For non-code files, just return template (overwrite)\n\t\treturn fs.readFile(srcPath, 'utf8');\n\t}\n\n\ttry {\n\t\tconst [srcText, destText] = await Promise.all([\n\t\t\tfs.readFile(srcPath, 'utf8'),\n\t\t\tfs.readFile(destPath, 'utf8')\n\t\t]);\n\n\t\t// If files are identical, no conflict\n\t\tif (srcText === destText) {\n\t\t\tif (opts.verbose) logInfo(`SKIP    ${relPath}`);\n\t\t\treturn destText;\n\t\t}\n\n\t\t// Insert Git-style conflict markers\n\t\t// Use \"HEAD\" for existing (destination) and \"template\" for new (source)\n\t\tconst conflictMarker = `<<<<<<< HEAD\n${destText}\\n=======\n${srcText}\\n>>>>>>> template\n`;\n\n\t\treturn conflictMarker;\n\t} catch (e) {\n\t\t// Re-throw error so caller can handle it (will skip instead of overwrite)\n\t\tthrow new Error(`Failed to merge file ${relPath}: ${(e as Error).message}`);\n\t}\n}\n\nexport async function copyTemplates({\n\topts,\n\tpaths\n}: {\n\topts: CliOptions;\n\tpaths: { templateRoot: string; destRoot: string };\n}) {\n\t// 1) Discover files under templates\n\tconst patterns = ['**/*'];\n\tconst ignore = ['**/node_modules/**', '**/.git/**', '**/dist/**'];\n\tconst relFiles = await fg(patterns, {\n\t\tcwd: paths.templateRoot,\n\t\tdot: true,\n\t\tonlyFiles: true,\n\t\tignore\n\t});\n\n\t// 2) Build plan\n\tconst plan: PlanItem[] = [];\n\tfor (const rel of relFiles) {\n\t\tconst src = path.join(paths.templateRoot, rel);\n\t\tconst dest = path.join(paths.destRoot, rel);\n\t\tconst exists = await fs.pathExists(dest);\n\t\tif (!exists) {\n\t\t\tplan.push({ kind: 'create', src, dest, rel });\n\t\t\tcontinue;\n\t\t}\n\t\t// If destination exists, auto-skip when contents are identical\n\t\ttry {\n\t\t\tconst [srcBuf, destBuf] = await Promise.all([fs.readFile(src), fs.readFile(dest)]);\n\t\t\tif (srcBuf.equals(destBuf)) {\n\t\t\t\tplan.push({ kind: 'skip', src, dest, rel });\n\t\t\t} else {\n\t\t\t\tplan.push({ kind: 'overwrite', src, dest, rel });\n\t\t\t}\n\t\t} catch {\n\t\t\t// On read error, fall back to prompting path\n\t\t\tplan.push({ kind: 'overwrite', src, dest, rel });\n\t\t}\n\t}\n\n\t// 3) Non-interactive conflict handling (no writes yet)\n\tif (!process.stdout.isTTY && !opts.force && !opts.yes) {\n\t\tconst hasConflicts = plan.some((p) => p.kind === 'overwrite');\n\t\tif (hasConflicts) {\n\t\t\tlogWarn('Conflicts detected and no TTY. Re-run with --force or --yes.');\n\t\t\treturn { ok: false, plan } as const;\n\t\t}\n\t}\n\n\t// 4) Dry-run output\n\tconst creates = plan.filter((p) => p.kind === 'create').length;\n\tconst overwrites = plan.filter((p) => p.kind === 'overwrite').length;\n\tconst skips = plan.filter((p) => p.kind === 'skip').length;\n\tif (opts.dryRun) {\n\t\tif (opts.verbose) {\n\t\t\tfor (const p of plan) {\n\t\t\t\tlet label = p.kind === 'create' ? 'CREATE' : p.kind === 'overwrite' ? 'OVERWRITE' : 'SKIP';\n\t\t\t\tif (p.kind === 'overwrite' && opts.merge) {\n\t\t\t\t\tlabel = 'MERGE';\n\t\t\t\t}\n\t\t\t\tlogInfo(`${label}  ${p.rel}`);\n\t\t\t}\n\t\t}\n\t\tconst action = opts.merge ? 'merge' : 'overwrite';\n\t\tlogInfo(`Plan: ${creates} create, ${overwrites} ${action}, ${skips} skip`);\n\t\treturn { ok: true, plan } as const;\n\t}\n\n\t// 5) Execute plan (writes)\n\tlet created = 0;\n\tlet overwritten = 0;\n\tlet merged = 0;\n\tlet backedUp = 0;\n\tlet skipped = 0;\n\tlet hadError = false;\n\n\tlet global: 'overwriteAll' | 'skipAll' | 'mergeAll' | null = null;\n\n\tfor (const step of plan) {\n\t\ttry {\n\t\t\t// Ensure directory\n\t\t\tawait fs.ensureDir(path.dirname(step.dest));\n\n\t\t\t// auto-skip identical files identified during planning\n\t\t\tif (step.kind === 'skip') {\n\t\t\t\tif (opts.verbose) logInfo(`SKIP    ${step.rel}`);\n\t\t\t\tskipped++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (step.kind === 'create') {\n\t\t\t\tif (opts.verbose) logInfo(`CREATE  ${step.rel}`);\n\t\t\t\tawait fs.copy(step.src, step.dest, { overwrite: false, errorOnExist: false });\n\t\t\t\tcreated++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// overwrite conflict\n\t\t\tlet decision: 'overwrite' | 'skip' | 'backup' | 'merge' = 'overwrite';\n\n\t\t\tif (opts.merge) {\n\t\t\t\tdecision = 'merge';\n\t\t\t} else if (opts.backup) {\n\t\t\t\tdecision = 'backup';\n\t\t\t} else if (opts.force || opts.yes) {\n\t\t\t\tdecision = 'overwrite';\n\t\t\t} else if (global === 'overwriteAll') {\n\t\t\t\tdecision = 'overwrite';\n\t\t\t} else if (global === 'skipAll') {\n\t\t\t\tdecision = 'skip';\n\t\t\t} else if (global === 'mergeAll') {\n\t\t\t\tdecision = 'merge';\n\t\t\t\tif (opts.verbose) logInfo(`Using mergeAll for ${step.rel}`);\n\t\t\t} else if (process.stdout.isTTY) {\n\t\t\t\tconst choice = await promptConflict(step.rel, step.src, step.dest);\n\t\t\t\tif (choice === 'overwriteAll') {\n\t\t\t\t\tglobal = 'overwriteAll';\n\t\t\t\t\tdecision = 'overwrite';\n\t\t\t\t} else if (choice === 'skipAll') {\n\t\t\t\t\tglobal = 'skipAll';\n\t\t\t\t\tdecision = 'skip';\n\t\t\t\t} else if (choice === 'mergeAll') {\n\t\t\t\t\tglobal = 'mergeAll';\n\t\t\t\t\tdecision = 'merge';\n\t\t\t\t\tif (opts.verbose) logInfo(`MergeAll selected, will merge all remaining conflicts`);\n\t\t\t\t} else if (choice === 'overwrite') {\n\t\t\t\t\tdecision = 'overwrite';\n\t\t\t\t} else if (choice === 'backup') {\n\t\t\t\t\tdecision = 'backup';\n\t\t\t\t} else if (choice === 'merge') {\n\t\t\t\t\tdecision = 'merge';\n\t\t\t\t} else {\n\t\t\t\t\tdecision = 'skip';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Non-interactive conflict\n\t\t\t\tlogWarn(`Conflict: ${step.rel}. Use --force, --yes, or --merge to resolve.`);\n\t\t\t\treturn { ok: false, plan } as const;\n\t\t\t}\n\n\t\t\tif (decision === 'skip') {\n\t\t\t\tif (opts.verbose) logInfo(`SKIP    ${step.rel}`);\n\t\t\t\tskipped++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (decision === 'merge') {\n\t\t\t\ttry {\n\t\t\t\t\tconst mergedContent = await mergeFiles(step.src, step.dest, step.rel, opts);\n\t\t\t\t\tawait fs.writeFile(step.dest, mergedContent, 'utf8');\n\t\t\t\t\tmerged++;\n\t\t\t\t\tif (opts.verbose) logInfo(`MERGE   ${step.rel}`);\n\t\t\t\t\tcontinue;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tlogWarn(`Failed to merge ${step.rel}, skipping: ${(e as Error).message}`);\n\t\t\t\t\tif (opts.verbose) logInfo(`SKIP    ${step.rel}`);\n\t\t\t\t\tskipped++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (decision === 'backup') {\n\t\t\t\tconst backupPath = `${step.dest}.bak.${Date.now()}`;\n\t\t\t\tawait fs.move(step.dest, backupPath, { overwrite: true });\n\t\t\t\tbackedUp++;\n\t\t\t\tif (opts.verbose) logInfo(`BACKUP  ${step.rel} -> ${path.basename(backupPath)}`);\n\t\t\t}\n\n\t\t\tawait fs.copy(step.src, step.dest, { overwrite: true, errorOnExist: false });\n\t\t\toverwritten++;\n\t\t\tif (opts.verbose) logInfo(`WRITE   ${step.rel}`);\n\t\t} catch (e) {\n\t\t\thadError = true;\n\t\t\tlogError(`Error processing ${step.rel}: ${(e as Error).message}`);\n\t\t}\n\t}\n\n\t// 6) Summary\n\tconst parts = [];\n\tif (created > 0) parts.push(`${created} created`);\n\tif (overwritten > 0) parts.push(`${overwritten} overwritten`);\n\tif (merged > 0) parts.push(`${merged} merged`);\n\tif (backedUp > 0) parts.push(`${backedUp} backed up`);\n\tif (skipped > 0) parts.push(`${skipped} skipped`);\n\tlogSuccess(`Done: ${parts.join(', ')}`);\n\treturn { ok: !hadError, plan } as const;\n}\n","#!/usr/bin/env node\nimport { parseArgs, formatHelp } from './cli/args';\nimport { resolvePaths } from './cli/paths';\nimport { copyTemplates } from './cli/copy';\nimport { logError, logInfo } from './cli/log';\n\nasync function main() {\n\ttry {\n\t\tconst opts = parseArgs(process.argv.slice(2));\n\t\tif (opts.help) {\n\t\t\tconsole.log(formatHelp());\n\t\t\tprocess.exit(0);\n\t\t}\n\t\tif (opts.version) {\n\t\t\tconst version = process.env.npm_package_version || 'unknown';\n\t\t\tconsole.log(version);\n\t\t\tprocess.exit(0);\n\t\t}\n\n\t\tconst paths = resolvePaths(opts.dest);\n\t\tlogInfo('CLI initialized');\n\t\tconst result = await copyTemplates({ opts, paths });\n\t\tif (!result.ok) {\n\t\t\tprocess.exit(1);\n\t\t}\n\t} catch (e) {\n\t\tlogError(e);\n\t\tprocess.exit(1);\n\t}\n}\nmain();\n"]}